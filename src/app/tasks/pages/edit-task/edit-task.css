.edit {
  border: 1px dashed #cfd4dc;
  border-radius: 16px;
  padding: 16px;
  background: #fafbfc;
}
.edit h3 { margin: 0 0 12px 0; font-size: 1.25rem; font-weight: 700; }

.loading { padding: 12px; color: #6b7280; }

.grid { display: grid; gap: 14px; grid-template-columns: 1fr; }

.field { display: grid; gap: 6px; }
.field label { font-weight: 600; color: #374151; }
.field input, .field textarea {
  width: 100%;
  background: #fff;
  color: #111827;
  border: 1px solid #d6d6d6;
  border-radius: 12px;
  padding: 12px 14px;
  outline: none;
  box-shadow: 0 1px 2px rgba(0,0,0,.03);
}
.field textarea { min-height: 110px; resize: vertical; }

.w-full { width:100%; }

.trigger {
  display:inline-flex;
  align-items:center;
  gap:8px;
  vertical-align:middle;
}
.trigger .avatar { width:22px; height:22px; border-radius:50%; object-fit:cover; }
.trigger .trigger-text { overflow:hidden; text-overflow:ellipsis; white-space:nowrap; max-width: 280px; }
.muted { color:#6b7280; }

.no-pointer { pointer-events:none; }
.no-select { user-select:none; }

.opt { display:flex; align-items:center; gap:10px; }
.opt .avatar { width:24px; height:24px; border-radius:50%; object-fit:cover; }
.opt .opt-text { overflow:hidden; text-overflow:ellipsis; white-space:nowrap; max-width:100%; }

:host ::ng-deep .assignee-field .mdc-notched-outline__notch {
  border-right: 0 !important;
}

.actions {
  display: flex;
  gap: 16px;
  justify-content: center;
  margin-top: 8px;
}
.btn {
  display: inline-flex; align-items: center; gap: 8px;
  border: none; border-radius: 12px; padding: 12px 20px;
  font-weight: 700; color: #fff; cursor: pointer;
  box-shadow: 0 2px 6px rgba(0,0,0,.08);
  transition: transform .05s ease, box-shadow .15s ease, filter .15s ease;
}
.btn .icon { width: 18px; height: 18px; fill: #fff; }
.btn:hover { transform: translateY(-1px); box-shadow: 0 6px 14px rgba(0,0,0,.18); }
.btn-save { background: #22c55e; }
.btn-cancel { background: #ef4444; }
:host { color: var(--text); }

.edit{
  background: var(--surface);
  border-color: var(--border);
}
.loading{ color: var(--muted); }

.field label{ color: var(--text); }
.field input,
.field textarea{
  background: var(--surface-2);
  color: var(--text);
  border: 1px solid var(--border);
}
.field input::placeholder,
.field textarea::placeholder{ color: var(--muted); }

#due{
  background: var(--surface-2);
  color: var(--text);
  border: 1px solid var(--border);
}

:host ::ng-deep .assignee-field .mdc-notched-outline__leading,
:host ::ng-deep .assignee-field .mdc-notched-outline__notch,
:host ::ng-deep .assignee-field .mdc-notched-outline__trailing{
  border-color: var(--border) !important;
}

:host ::ng-deep .assignee-field .mdc-floating-label{
  color: var(--muted) !important;
}
:host ::ng-deep .assignee-field.mdc-text-field--focused .mdc-floating-label{
  color: var(--text) !important;
}

:host ::ng-deep .assignee-field .mat-mdc-select-trigger{
  color: var(--text) !important;
}
:host ::ng-deep .assignee-field .mat-mdc-select-arrow{
  color: var(--muted) !important;
  fill: var(--muted) !important;
}

:host ::ng-deep .cdk-overlay-pane .mat-mdc-select-panel{
  background: var(--surface) !important;
  color: var(--text) !important;
  border: 1px solid var(--border);
}
:host ::ng-deep .mat-mdc-option{
  color: var(--text) !important;
}
:host ::ng-deep .mat-mdc-option.mdc-list-item--selected{
  background: color-mix(in oklab, var(--primary, #3b82f6) 14%, transparent) !important;
}
:host ::ng-deep .mat-mdc-option.mdc-list-item--selected .mdc-list-item__primary-text{
  color: var(--text) !important;
}
:host-context([data-theme="dark"]),
:host-context(.dark),
:host-context(html.dark) {
  .field input,
  .field textarea,
  #due {
    color: #ffffff !important;
    caret-color: #ffffff !important;
  }
  .field label { color: #ffffff !important; }
  .field input::placeholder,
  .field textarea::placeholder { color: #aab4c0 !important; }
}

:host ::ng-deep .assignee-field .mat-mdc-select-trigger,
:host ::ng-deep .assignee-field .mat-mdc-select-value,
:host ::ng-deep .assignee-field .mat-mdc-select-value-text,
:host ::ng-deep .assignee-field .mat-mdc-select-min-line,
:host ::ng-deep .assignee-field .mat-mdc-select-trigger .mat-mdc-select-value-text span {
  color: var(--text) !important;
}

:host-context([data-theme="dark"]) ::ng-deep .assignee-field .mat-mdc-select-trigger,
:host-context([data-theme="dark"]) ::ng-deep .assignee-field .mat-mdc-select-value,
:host-context([data-theme="dark"]) ::ng-deep .assignee-field .mat-mdc-select-value-text,
:host-context([data-theme="dark"]) ::ng-deep .assignee-field .mat-mdc-select-min-line,
:host-context([data-theme="dark"]) ::ng-deep .assignee-field .mat-mdc-select-trigger .mat-mdc-select-value-text span,
:host-context(.dark) ::ng-deep .assignee-field .mat-mdc-select-trigger,
:host-context(.dark) ::ng-deep .assignee-field .mat-mdc-select-value,
:host-context(.dark) ::ng-deep .assignee-field .mat-mdc-select-value-text,
:host-context(.dark) ::ng-deep .assignee-field .mat-mdc-select-min-line,
:host-context(.dark) ::ng-deep .assignee-field .mat-mdc-select-trigger .mat-mdc-select-value-text span {
  color: #ffffff !important;
}

:host ::ng-deep .cdk-overlay-pane .mat-mdc-select-panel.assignee-panel {
  background: var(--surface) !important;
  color: var(--text) !important;
  border: 1px solid var(--border) !important;
  box-shadow: var(--elev-2, 0 10px 30px rgba(0,0,0,.25)) !important;
}

:host ::ng-deep .assignee-panel .mat-mdc-option {
  color: var(--text) !important;
}
:host ::ng-deep .assignee-panel .mat-mdc-option + .mat-mdc-option {
  border-top: 1px solid var(--border) !important;
}
:host ::ng-deep .assignee-panel .mat-mdc-option:hover,
:host ::ng-deep .assignee-panel .mat-mdc-option.mdc-list-item--selected {
  background: var(--surface-2) !important;
}
